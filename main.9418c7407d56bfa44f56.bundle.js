(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(323),createClass=__webpack_require__(324),possibleConstructorReturn=__webpack_require__(326),getPrototypeOf=__webpack_require__(325),inherits=__webpack_require__(327),react=__webpack_require__(0),react_default=__webpack_require__.n(react),MediaType=Object.freeze({link:Symbol("link"),image:Symbol("image"),video:Symbol("video"),audio:Symbol("audio")}),regenerator=__webpack_require__(46),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(109),properRace=function properRace(promises){var indexPromises=promises.map(function(p,index){return p.catch(function(){throw index})});return Promise.race(indexPromises).catch(function(index){return promises.splice(index,1)[0].catch(function(){}),properRace(promises)})},ext={image:["png","jpg","jpeg","webp","gif","bmp"],video:["mp4","mkv","webm","avi","mov"],audio:["mp3","wav","flac","ogg"]},getMediaTypeByExt=function(){var _ref=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee(url){var _ref2,pathname,file_ext;return regenerator_default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,_ref2=new URL(url),pathname=_ref2.pathname,file_ext=pathname.substring(pathname.lastIndexOf(".")+1),!(ext.image.indexOf(file_ext)>=0)){_context.next=5;break}return _context.abrupt("return",MediaType.image);case 5:if(!(ext.video.indexOf(file_ext)>=0)){_context.next=7;break}return _context.abrupt("return",MediaType.video);case 7:if(!(ext.audio.indexOf(file_ext)>=0)){_context.next=9;break}return _context.abrupt("return",MediaType.audio);case 9:return _context.abrupt("return",MediaType.link);case 12:return _context.prev=12,_context.t0=_context.catch(0),_context.abrupt("return",MediaType.link);case 15:case"end":return _context.stop()}},_callee,null,[[0,12]])}));return function getMediaTypeByExt(_x){return _ref.apply(this,arguments)}}(),getMediaTypeByMeta=function(){var _ref3=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee2(url){var image,video,audio;return regenerator_default.a.wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return image=GetMediaType_checkIfImage(url),video=GetMediaType_checkIfVideo(url),audio=GetMediaType_checkIfAudio(url),_context2.next=5,properRace([image,video,audio]);case 5:return _context2.abrupt("return",_context2.sent);case 6:case"end":return _context2.stop()}},_callee2)}));return function getMediaTypeByMeta(_x2){return _ref3.apply(this,arguments)}}(),GetMediaType_checkIfImage=function checkIfImage(url){return new Promise(function(resolve,reject){var img=new Image;img.onerror=reject,img.onabort=reject,img.onload=function(){return resolve(MediaType.image)},img.src=url})},GetMediaType_checkIfVideo=function checkIfVideo(url){return new Promise(function(resolve,reject){var video=document.createElement("video");video.onerror=reject,video.onabort=reject,video.oncanplay=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee3(){return regenerator_default.a.wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,getMediaTypeByExt(url);case 2:if(_context3.t0=_context3.sent,_context3.t1=MediaType.audio,_context3.t0!==_context3.t1){_context3.next=8;break}resolve(MediaType.audio),_context3.next=9;break;case 8:resolve(MediaType.video);case 9:case"end":return _context3.stop()}},_callee3)})),video.src=url})},GetMediaType_checkIfAudio=function checkIfAudio(url){return new Promise(function(resolve,reject){var audio=document.createElement("audio");audio.onerror=reject,audio.onabort=reject,audio.oncanplay=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee4(){return regenerator_default.a.wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,getMediaTypeByExt(url);case 2:if(_context4.t0=_context4.sent,_context4.t1=MediaType.video,_context4.t0!==_context4.t1){_context4.next=8;break}resolve(MediaType.video),_context4.next=9;break;case 8:resolve(MediaType.audio);case 9:case"end":return _context4.stop()}},_callee4)})),audio.src=url})};__webpack_require__.d(__webpack_exports__,"a",function(){return react_auto_media_ReactAutoMedia});var react_auto_media_ReactAutoMedia=function(_Component){function ReactAutoMedia(){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,ReactAutoMedia);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(ReactAutoMedia)).call.apply(_getPrototypeOf2,[this].concat(args)))).state={type:MediaType.link},_this.updateMediaType=function(url){getMediaTypeByExt(url).then(function(type){_this.props.onTypeDeduced(type),_this.setState({type:type})}),getMediaTypeByMeta(url).then(function(type){_this.props.onTypeDeduced(type),_this.setState({type:type})})},_this.renderLink=function(){return react_default.a.createElement("a",Object.assign({href:_this.props.src},_this.props.linkProps),_this.props.src)},_this.renderImage=function(){return react_default.a.createElement("img",Object.assign({src:_this.props.src},_this.props.imageProps))},_this.renderVideo=function(){return react_default.a.createElement("video",Object.assign({src:_this.props.src},_this.props.videoProps))},_this.renderAudio=function(){return react_default.a.createElement("audio",Object.assign({src:_this.props.src},_this.props.audioProps))},_this}return Object(inherits.a)(ReactAutoMedia,_Component),Object(createClass.a)(ReactAutoMedia,[{key:"componentDidMount",value:function componentDidMount(){this.updateMediaType(this.props.src)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps,nextContext){this.updateMediaType(nextProps.src)}},{key:"render",value:function render(){switch(this.state.type){case MediaType.image:return this.renderImage();case MediaType.video:return this.renderVideo();case MediaType.audio:return this.renderAudio();default:return this.renderLink()}}}]),ReactAutoMedia}(react.Component);react_auto_media_ReactAutoMedia.defaultProps={onTypeDeduced:function onTypeDeduced(){},linkProps:{},imgProps:{},videoProps:{muted:!0,autoPlay:!0,controls:!0},audioProps:{controls:!0}}},328:function(module,exports,__webpack_require__){__webpack_require__(329),__webpack_require__(415),module.exports=__webpack_require__(416)},416:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(106),_storybook_addon_info__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(316);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addDecorator)(_storybook_addon_info__WEBPACK_IMPORTED_MODULE_1__.withInfo),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(function loadStories(){__webpack_require__(647)},module)}.call(this,__webpack_require__(164)(module))},475:function(module,exports,__webpack_require__){var map={"./nestedObjectAssign":257,"./nestedObjectAssign.js":257};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=475},647:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(106),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(108),_components_react_auto_media__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(110);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("ReactAutoMedia",module).add("with link",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_react_auto_media__WEBPACK_IMPORTED_MODULE_3__.a,{src:"https://awooo.ru/",onTypeDeduced:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__.action)("Type Deduced")})}).add("with image",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_react_auto_media__WEBPACK_IMPORTED_MODULE_3__.a,{src:"https://en.touhouwiki.net/images/thumb/2/25/Th075reimu01.png/256px-Th075reimu01.png",onTypeDeduced:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__.action)("Type Deduced")})}).add("with video",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_react_auto_media__WEBPACK_IMPORTED_MODULE_3__.a,{src:"https://nazrin.awooo.ru/_/19ab20cedf45b3140a614a5fd85960c2.webm",onTypeDeduced:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__.action)("Type Deduced")})}).add("with audio",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_react_auto_media__WEBPACK_IMPORTED_MODULE_3__.a,{src:"https://nazrin.awooo.ru/_/c0519416c034cfac2964ce03aaf532fd.mp3",onTypeDeduced:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__.action)("Type Deduced")})})}.call(this,__webpack_require__(164)(module))}},[[328,1,2]]]);
//# sourceMappingURL=main.9418c7407d56bfa44f56.bundle.js.map